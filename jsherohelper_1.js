var heros = [
    { 
        "hero_name":"Captain America",
        "hero_file_name":"Captain_America",
        "hero_class" : "Vanguard",
        "teamup" : ["Thor"]
    },
    {
        "hero_name":"Doctor Strange",
        "hero_file_name": "Doctor_Strange",
        "hero_class" : "Vanguard",
        "teamup" : ["Hulk"]
    },
    { 
        "hero_name":"Groot",
        "hero_file_name":"Groot",
        "hero_class" : "Vanguard",
        "teamup" : ["Rocket Raccoon", "Moon Knight"]
    },
    { 
        "hero_name":"Hulk",
        "hero_file_name":"Hulk",
        "hero_class" : "Vanguard",
        "teamup" : ["Doctor Strange", "Iron Man", "Wolverine"]
    },
    { 
        "hero_name":"Magneto",
        "hero_file_name":"Magneto",
        "hero_class" : "Vanguard",
        "teamup" : ["Scarlet Witch"]
    },
    { 
        "hero_name":"Peni Parker",
        "hero_file_name":"Peni_Parker",
        "hero_class" : "Vanguard",
        "teamup" : ["Venom"]
    },
    { 
        "hero_name":"The Thing",
        "hero_file_name":"The_Thing",
        "hero_class" : "Vanguard",
        "teamup" : ["Invisible Woman", "Wolverine"]
    },
    { 
        "hero_name":"Thor",
        "hero_file_name":"Thor",
        "hero_class" : "Vanguard",
        "teamup" : ["Hela", "Storm", "Captain America"]
    },
    { 
        "hero_name":"Venom",
        "hero_file_name":"Venom",
        "hero_class" : "Vanguard",
        "teamup" : ["Spider Man", "Peni Parker"]
    },
    { 
        "hero_name":"Black Panther",
        "hero_file_name":"Black_Panther",
        "hero_class" : "Duelist", 
        "teamup" : ["Magik"]
    },
    { 
        "hero_name":"Black Widow",
        "hero_file_name":"Black_Widow",
        "hero_class" : "Duelist", 
        "teamup" : ["Hawkeye"]
    },
    { 
        "hero_name":"Hawkeye",
        "hero_file_name":"Hawkeye",
        "hero_class" : "Duelist", 
        "teamup" : ["Black Widow"]
    },
    { 
        "hero_name":"Hela",
        "hero_file_name":"Hela",
        "hero_class" : "Duelist", 
        "teamup" : ["Thor", "Loki"]
    },
    { 
        "hero_name":"Human Torch",
        "hero_file_name":"Human_Torch",
        "hero_class" : "Duelist", 
        "teamup" : ["Storm", "Invisible Woman"]
    },
    { 
        "hero_name":"Iron Fist",
        "hero_file_name":"Iron_Fist",
        "hero_class" : "Duelist", 
        "teamup" : ["Luna Snow"]
    },
    { 
        "hero_name":"Iron Man",
        "hero_file_name":"Iron_Man",
        "hero_class" : "Duelist", 
        "teamup" : ["Hulk"]
    },
    { 
        "hero_name":"Magik",
        "hero_file_name":"Magik",
        "hero_class" : "Duelist", 
        "teamup" : ["Black Panther", "Psylocke"]
    },
    { 
        "hero_name":"Mister Fantastic",
        "hero_file_name":"Namor",
        "hero_class" : "Duelist", 
        "teamup" : ["Invisible Woman"]
    },
    { 
        "hero_name":"Moon Knight",
        "hero_file_name":"Moon_Knight",
        "hero_class" : "Duelist", 
        "teamup" : ["Cloak and Dagger"]
    },
    { 
        "hero_name":"Namor",
        "hero_file_name":"Namor",
        "hero_class" : "Duelist", 
        "teamup" : ["Luna Snow"]
    },
    { 
        "hero_name":"Psylocke",
        "hero_file_name":"Psylocke",
        "hero_class" : "Duelist", 
        "teamup" : ["Magik"]
    },
    { 
        "hero_name":"Scarlet Witch",
        "hero_file_name":"Scarlet_Witch",
        "hero_class" : "Duelist", 
        "teamup" : ["Magneto"]
    },
    { 
        "hero_name":"Spider-Man",
        "hero_file_name":"Spider-Man",
        "hero_class" : "Duelist", 
        "teamup" : ["Venom", "Squirrel Girl"]
    },
    { 
        "hero_name":"Squirrel Girl",
        "hero_file_name":"Squirrel_Girl",
        "hero_class" : "Duelist", 
        "teamup" : ["Spider-Man"]
    },
    { 
        "hero_name":"Star Lord",
        "hero_file_name":"Star-Lord",
        "hero_class" : "Duelist", 
        "teamup" : ["Adam Warlock"]
    },
    { 
        "hero_name":"Storm",
        "hero_file_name":"Storm",
        "hero_class" : "Duelist", 
        "teamup" : ["Human Torch", "Thor"]
    },
    { 
        "hero_name":"The Punisher",
        "hero_file_name":"The_Punisher",
        "hero_class" : "Duelist", 
        "teamup" : ["Rocket Raccoon"]
    },
    { 
        "hero_name":"Winter Soldier",
        "hero_file_name":"Winter_Soldier",
        "hero_class" : "Duelist", 
        "teamup" : ["Rocket Raccoon"]
    },
    { 
        "hero_name":"Wolverine",
        "hero_file_name":"Wolverine",
        "hero_class" : "Duelist", 
        "teamup" : ["Hulk", "The Thing"]
    },
    {
        "hero_name":"Adam Warlock",
        "hero_file_name": "Adam_Warlock",
        "hero_class" : "Strategist",
        "teamup" : ["Mantis", "Star-Lord"]
    }, 
    {
        "hero_name":"Cloak and Dagger",
        "hero_file_name": "Cloak_Dagger",
        "hero_class" : "Strategist",
        "teamup" : ["Moon Knight"]
    },
    {
        "hero_name":"Invisible Woman",
        "hero_file_name": "Invisible_Woman",
        "hero_class" : "Strategist",
        "teamup" : ["The Thing", "Human Torch", "Mister Fantastic"]
    }, 
    {
        "hero_name" : "Jeff the Land Shark",
        "hero_file_name" : "Jeff_The_Land_Shark",
        "hero_class" : "Strategist",
        "teamup" : ["Luna Snow", "Groot"]
    },
    {
        "hero_name":"Loki",
        "hero_file_name": "Loki",
        "hero_class" : "Strategist",
        "teamup" : ["Hela"]
    }, 
    {
        "hero_name":"Luna Snow",
        "hero_file_name":"Luna_Snow",
        "hero_class" : "Strategist",
        "teamup" : ["Namor", "Jeff the Land Shark", "Iron Fist"]
    },
    {
        "hero_name":"Mantis",
        "hero_file_name": "Mantis",
        "hero_class" : "Strategist",
        "teamup" : ["Adam Warlock"]
    }, 
    {
        "hero_name":"Rocket Raccoon",
        "hero_file_name": "Rocket_Raccoon",
        "hero_class" : "Strategist",
        "teamup" : ["The Punisher", "Winter Soldier"]
    }
    ]

var favs = [];
var least = [];
var cur_team_e = [];
var cur_team_a = [];
var van = [];
var strat = [];
var duel = [];
for(let q = 0; q < heros.length; q++){
    let role = heros[q].hero_class;
        if(role == "Strategist"){
            strat.push(heros[q]);
        } else if (role == "Vanguard"){
            van.push(heros[q]);
        } else {
            duel.push(heros[q]);
        }
}


for(var x = 0; x < 2; x++)
{
    let team;
    if(x == 0){
        team = "e";
    } else {
        team = "a";
    }
    function addDrop(dropdown){
        const ul = document.createElement("ul");
        ul.class = "dropdown-menu";
        for(var i = 1; i < heros.length+1; i++)
            {
                const opt = document.createElement("option");
                const form = document.createElement("div");
                form.className = "form-check";
                const input = document.createElement("input");
                input.class = "form-check-input";
                input.type = "radio";
                input.name = "flexRadioDefault";
                input.id = "flexRadioDefault" + i;
                input.setAttribute("checked", "");
                input.value = heros[i-1].hero_file_name;
                const label = document.createElement("label");
                label.id = "form-check-label";
                label.setAttribute("for", "flexRadioDefault"+i);
                form.appendChild(input);
                form.appendChild(label);
                ul.appendChild(form);
                form.textContent = heros[i-1].hero_name;
                opt.appendChild(form)
                dropdown.appendChild(opt);
            }
            const newOption = document.createElement("option");
            newOption.value = "newOption";
            newOption.textContent = "New Option";
            dropdown.appendChild(newOption);     
    }
    for(let j = 1; j < 7; j++)
    {
        const dropdown = document.createElement("select");
        dropdown.id = (team+"_hero_picker_"+j);
        const sel = document.createElement("option");
        sel.value = ("default");
        sel.textContent = ("Pick a hero");
        dropdown.appendChild(sel);
        addDrop(dropdown);
        const pic = document.getElementById(team+"_hero_pic_"+j);
        const col = document.getElementById(team+"_hero_col_"+j);
        col.appendChild(dropdown);
        dropdown.addEventListener("change", function() {
            let sel_hero = dropdown.value;
            let file_hero = " ";
            for(let i = 0; i < heros.length; i++){
                if(sel_hero == heros[i].hero_name){
                    file_hero = heros[i].hero_file_name;
                    if(team == 'e')
                    {
                        cur_team_e[j-1] = heros[i]
                    } else {
                        cur_team_a[j-1] = heros[i]
                    }
                }
            }
            if(file_hero != " "){
                    pic.src = "c:\\Users\\elija\\Desktop\\Hero_pics\\"+file_hero+"_Tile.png";
            } else {
                console.log("character not found");
            }
        
        });
    }

}

const rand_button = document.getElementById("rand_generate");
rand_button.addEventListener("click", function() {
    let num = Math.random()*(heros.length-1);
    num = Math.round(num);
    const r_pic = document.getElementById("rand_hero_pic");
    let cur = r_pic.src;
    let ind = cur.indexOf("_Tile");
    cur = cur.substring(41,ind)
    while(cur == heros[num].hero_file_name){
        num = Math.random()*(heros.length-1);
        num = Math.round(num);
    }
    r_pic.src = "c:\\Users\\elija\\Desktop\\Hero_pics\\"+heros[num].hero_file_name+"_Tile.png";
});


// let position = 0;
// function move() {
//     position += 2; // Increase position
//     document.getElementById("rand_hero_pic").style.left = position + "px";

//     if (position < 500) { // Stop at 500px
//         requestAnimationFrame(move);
//     }
// }

// move();


    for(let i = 0; i < 2; i++){
        let p;
        if(i == 0){
            p = "fav";
        } else {
            p = "les";
        }
    const dropdown = document.createElement("select");
    dropdown.id = (p+"_hero_picker");
    const sel = document.createElement("option");
    sel.value = ("default");
    sel.textContent = ("Pick a hero");
    dropdown.appendChild(sel);
    addDrop(dropdown);
    const col = document.getElementById(p+"_hero_col");
    col.appendChild(dropdown);
    if(i == 0){    
    const fav_btn = document.getElementById("fav_btn");
        fav_btn.addEventListener("click", function() {
            let sel_hero = dropdown.value;
            for(let i = 0; i < heros.length; i++){
                if(sel_hero == heros[i].hero_name){
                    let dup = false;
                    for(let x = 0; x < favs.length; x++){
                        if(sel_hero == favs[x].hero_name){
                            dup = true;
                        }
                    }
                    if(!dup){
                    favs.push(heros[i]);
                    }
                }
            }
        });
    } else {
        const les_btn = document.getElementById("les_btn");
        les_btn.addEventListener("click", function() {
            let sel_hero = dropdown.value;
            for(let i = 0; i < heros.length; i++){
                if(sel_hero == heros[i].hero_name){
                    let dup = false;
                    for(let x = 0; x < least.length; x++){
                        if(sel_hero == least[x].hero_name){
                            dup = true;
                        }
                    }
                    if(!dup){
                    least.push(heros[i]);
                    }
                }
            }
        });
    }
}






const gen_btn = document.getElementById("main_gen");
gen_btn.addEventListener("click", function() {
    let user_sel_char;
    let role = strat;
    let rec_role = "Strategist";
    if(cur_team_a.length < 6){
        user_sel_char = false;
    } else {
        user_sel_char = true;
    }
    let a_strat = 0;
    let a_van = 0;
    let a_duel = 0;
    let e_strat = 0;
    let e_van = 0;
    let e_duel = 0;
    for(let i = 0; i < cur_team_a.length; i++){
        let role = cur_team_a[i].hero_class;
        if(role == "Strategist"){
            a_strat++;
        } else if (role == "Vanguard"){
            a_van++;
        } else {
            a_duel++;
        }
    }
    for(let i = 0; i < cur_team_e.length; i++){
        let role = cur_team_e[i].hero_class;
        if(role == "Strategist"){
            e_strat++;
        } else if (role == "Vanguard"){
            e_van++;
        } else {
            e_duel++;
        }
    }

    if(a_strat == 2){
        if(a_van == 2){
            rec_role = "Duelist";
            role = duel;
        } else if(a_duel == 2){
            rec_role = "Vanguard";
            role = van;
        } 
    }

    if(a_strat != 0){
        if(a_van == 0){
            rec_role = "Vanguard";
            role = van;
        } else if (a_duel == 0){
        rec_role = "Duelist";
        role = duel;
        }
    }

    if(a_strat >= 3){
        if(a_duel == 2){
            rec_role = "Vanguard";
            role = van;
        } else {
            rec_role = "Duelist";
            role = duel;
        }
    }
    
    console.log("You should play a : " + rec_role);
    getHero(role, rec_role);
});

function getHero(role, h_class){
    const reason = document.getElementById("reason");
    const best = document.getElementById("best");
    const suggest = document.getElementById("suggest");
    role1 = role.slice();
    let tup = 0;
    
    for(let i = 0; i < cur_team_a.length; i++){
        for(let x = 0; x < role1.length; x++){
            if(role1[x].hero_name == cur_team_a[i].hero_name){
                role1.splice(x,1);
            }
        }
    }
    //let sug_hero = role1[0];
    let sug_hero = [];
    for(let i = 0; i < cur_team_a.length; i++){
        for(let x = 0; x < cur_team_a[i].teamup.length; x++){
            for(let p = 0; p < role1.length; p++){
                if(cur_team_a[i].teamup[x] == role1[p].hero_name){
                    sug_hero.push(role1[p]);
                    tup = 1;
                }
            }
        }
    }

    suggest.textContent = "You could play: ";
    for(let i = 0; i < sug_hero.length; i++){
        if(i < sug_hero.length-1){
            suggest.insertAdjacentText('beforeend', sug_hero[i].hero_name+", ");
        } else {
            suggest.insertAdjacentText('beforeend', sug_hero[i].hero_name);
        }
    }
    reason.textContent = "Because: ";
    if(tup == 0){
        for(let i = 0; i < favs.length; i++){
            if(favs[i].hero_class == h_class && role1.includes(favs[i])){
                sug_hero = favs[i];
            }
        }
        reason.insertAdjacentText('beforeend', "There are no teamups");
    } else {
        reason.insertAdjacentText('beforeend', "This character has a good teamup");
    }


    const user_hero = document.getElementById("a_hero_pic_6");
    user_hero.src = "c:\\Users\\elija\\Desktop\\Hero_pics\\"+sug_hero[0].hero_file_name+"_Tile.png";
}


